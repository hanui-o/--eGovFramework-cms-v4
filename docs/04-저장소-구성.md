# 저장소 구성

## 선택: Option A (모던 스택)

프론트엔드와 백엔드를 분리한 REST API 기반 아키텍처

---

## 사용 저장소

| 순위 | 저장소 | 역할 | URL |
|:----:|--------|------|-----|
| 1 | egovframe-template-simple-backend | 백엔드 기반 | [GitHub](https://github.com/eGovFramework/egovframe-template-simple-backend) |
| 2 | **Next.js (직접 생성)** | 프론트엔드 | - |
| 참고 | egovframe-common-components | 기능 참고/적용 | [GitHub](https://github.com/eGovFramework/egovframe-common-components) |
| 참고 | egovframe-portal-site-template | 구조/로직 참고 | [GitHub](https://github.com/eGovFramework/egovframe-portal-site-template) |

---

## 1. egovframe-template-simple-backend

### 개요
- REST API 백엔드 템플릿
- JSP 없이 API만 제공

### 기술 스택
| 항목 | 버전 |
|------|------|
| Java | 1.8+ |
| Spring Boot | 2.x |
| Maven | 3.8.4 |
| MyBatis | - |
| Database | H2 (내장) → MySQL로 변경 |

### 주요 특징
- JavaConfig 기반 설정 (XML 없음)
- JWT 토큰 인증
- Swagger API 문서 자동 생성
- AOP 기반 트랜잭션
- REST API Controller 패턴

### 포함 기능
```
- 로그인 / 로그아웃 (JWT)
- 게시판 CRUD
- 회원 관리
- Swagger UI (/swagger-ui/index.html)
```

### 실행 방법
```bash
# CLI
mvn spring-boot:run

# JAR
java -jar <파일명>.jar --spring.profiles.active=<프로필>
```

---

## 2. Next.js 프론트엔드 (직접 생성)

### 개요
- Next.js 14+ 기반 프론트엔드
- 사용자/관리자 페이지 통합
- egovframe-template-simple-react 사용 안 함

### 기술 스택
| 항목 | 버전 |
|------|------|
| Next.js | 14+ |
| React | 18 |
| TypeScript | 5+ |
| Node.js | 18+ |
| 스타일링 | Tailwind CSS |

### 주요 특징
- App Router 사용
- SSR/SSG 지원 (SEO 대응)
- 사용자/관리자 통합 (`/admin` 경로)
- TypeScript 기본

### 폴더 구조
```
frontend/
├── src/
│   ├── app/
│   │   ├── (user)/              # 사용자 페이지 그룹
│   │   │   ├── page.tsx         # 메인 페이지
│   │   │   ├── board/           # 게시판
│   │   │   │   ├── page.tsx     # 목록
│   │   │   │   └── [id]/page.tsx # 상세
│   │   │   ├── login/           # 로그인
│   │   │   └── signup/          # 회원가입
│   │   ├── admin/               # 관리자 페이지
│   │   │   ├── page.tsx         # 대시보드
│   │   │   ├── board/           # 게시판 관리
│   │   │   └── users/           # 회원 관리
│   │   ├── layout.tsx
│   │   └── globals.css
│   ├── components/              # 공통 컴포넌트
│   │   ├── ui/
│   │   └── layout/
│   └── lib/                     # 유틸리티
│       ├── api.ts               # API 호출
│       └── auth.ts              # 인증 관련
├── public/
├── package.json
└── next.config.js
```

### 생성 명령
```bash
npx create-next-app@latest frontend --typescript --tailwind --app --src-dir
```

### 실행 방법
```bash
cd frontend
npm run dev
# http://localhost:3000
```

---

## 3. egovframe-common-components (참고용)

### 개요
- 254개 공통 기능 컴포넌트
- 필요한 기능만 선택하여 적용

### 활용 방법
```
1. 필요한 컴포넌트 코드 분석
2. Service / DAO / Mapper 참고
3. 백엔드에 맞게 수정하여 적용
4. REST API로 변환
```

### CMS에 적용할 컴포넌트
| 패키지 | 컴포넌트 | 용도 |
|--------|---------|------|
| uat | 일반로그인 | JWT로 변환 적용 |
| uss/umt | 회원관리 | 회원 CRUD |
| cop/bbs | 게시판관리, 통합게시판 | 게시판 |

---

## 4. egovframe-portal-site-template (참고용)

### 개요
- 포털 사이트 올인원 템플릿
- JSP 기반 (레거시)

### 참고 포인트
```
- 공통컴포넌트 적용 방법
- DB 스키마 구조
- 권한 관리 로직
- 게시판 구조
```

### 기본 계정
| 역할 | ID | PW |
|------|----|----|
| 관리자 | admin | 1 |
| 사용자 | user1 | 1 |

---

## 프로젝트 폴더 구조

```
--eGovFramework-cms/
├── README.md
├── docs/                           # 기술 문서
│   ├── 01-기술스택.md
│   ├── 01-기술스택-v5-예상.md
│   ├── 02-공통컴포넌트-목록.md
│   ├── 03-CMS-기획.md
│   └── 04-저장소-구성.md
│
├── backend/                        # 백엔드 (clone)
│
├── frontend/                       # 프론트엔드 (Next.js 직접 생성)
│
└── reference/                      # 참고용 (선택)
    ├── egovframe-common-components/
    └── egovframe-portal-site-template/
```

---

## 개발 환경 셋팅 순서

### 1단계: 백엔드 Clone
```bash
git clone https://github.com/eGovFramework/egovframe-template-simple-backend.git backend
```

### 2단계: 프론트엔드 생성 (Next.js)
```bash
npx create-next-app@latest frontend --typescript --tailwind --app --src-dir
```

### 3단계: 백엔드 실행
```bash
cd backend
mvn spring-boot:run
# http://localhost:8080
# Swagger: http://localhost:8080/swagger-ui/index.html
```

### 4단계: 프론트엔드 실행
```bash
cd frontend
npm run dev
# http://localhost:3000
```

### 5단계: DB 변경 (H2 → MySQL)
```
1. pom.xml에 MySQL 드라이버 추가
2. application.properties 수정
3. 스키마/데이터 마이그레이션
```

---

## 다음 단계

- [ ] 백엔드 저장소 Clone 및 실행
- [ ] Next.js 프로젝트 생성
- [ ] 기본 동작 확인
- [ ] MySQL 연동
- [ ] 공통컴포넌트 분석 및 적용 시작
